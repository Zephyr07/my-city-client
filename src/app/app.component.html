<ion-app>
    <ion-split-pane contentId="main-content">
      <ion-menu contentId="main-content" menuId="custom" type="overlay" [swipeGesture]="false">
          <ion-header class="sidebar-header">
              <ion-button class="toggleButton" fill="clear" color="white" (click)="toggleButton()">
                  <ion-icon *ngIf="isUserEnabled" name="settings"></ion-icon>
                  <ion-icon *ngIf="!isUserEnabled" name="apps-outline"></ion-icon>
                </ion-button>
                
              <ion-avatar class="ion-margin-top ion-text-center">
                  <img src="../assets/img/default-avatar.png" />
                </ion-avatar>
                
                <p class="all-center ion-padding-top"><ion-text color="light">{{client.nom}}</ion-text></p>
        </ion-header>
        <ion-content>
  
            <ion-list class="menu-list" *ngIf="isUserEnabled">
                <ion-menu-toggle auto-hide="false" >
                  <ion-item [routerDirection]="'root'" [routerLink]="[p.url]" *ngFor="let p of appPages" lines="none" detail="false">
                    <ion-icon color="secondary" slot="start" [name]="p.icon"></ion-icon>
                    <ion-label>
                      {{p.title}}
                    </ion-label>
                  </ion-item>
                  <ion-item (click)="logout()" lines="none">
                          <ion-icon color="secondary" slot="start" name="log-out-outline"></ion-icon>
                          <ion-label>Deconnexion</ion-label>
                    </ion-item>
                </ion-menu-toggle>
              </ion-list>
            <ion-list class="categoryList" *ngIf="!isUserEnabled">
              
                <ion-item class="homeItem" (click)="home()" lines="none">
                    <ion-row class="ion-padding-top">
                        <ion-col class="menu-name">
                            <ion-text class="homeText">
                              <span>Acceuil</span>
                            </ion-text>
                        </ion-col>
                    </ion-row>
                  </ion-item>
                <ion-item *ngFor="let p of categories;  let i=index" (click)="openPage(p, i);" lines="none">
                    <ion-row class="ion-padding-top parentRow">
                      <!-- Parent Pages  -->
                      <ion-col class="menu-name">
                          <ion-text class="categoryText">
                          <span >{{p.nom | titlecase}}</span>
                          <ion-icon [name]="selectedMenu == i? 'arrow-down' : 'arrow-forward'"></ion-icon>
                        </ion-text>
                       
                        <!-- Child Pages  -->
                        <ion-list [hidden]="selectedMenu != i" class="ion-no-margin ion-no-padding ion-padding-top"> 
                          <ion-item *ngFor="let subPage of p.sous_categories;let i2=index" class="ion-text-wrap" (click)="openSubPage(subPage)" lines="none">
                            <ion-row>
                              <ion-col class="menu-name"><ion-text color="medium" [innerHTML]="subPage.nom">&nbsp;</ion-text></ion-col>
                            </ion-row>
                          </ion-item>
                        </ion-list>
                      </ion-col>
                    </ion-row>
                  </ion-item>
  
            </ion-list>
        </ion-content>
        <!-- Company Footer -->
        <ion-footer>
            <p class="ion-text-center"><ion-text color="secondary">&copy; 2021 Dynamics</ion-text></p>
        </ion-footer>
  
      </ion-menu>
      <ion-router-outlet id="main-content" [swipeGesture]="false"></ion-router-outlet>
    </ion-split-pane>
  </ion-app>
  